!function(e){var t={};function o(n){if(t[n])return t[n].exports;var r=t[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,o),r.l=!0,r.exports}o.m=e,o.c=t,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)o.d(n,r,function(t){return e[t]}.bind(null,r));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o(o.s=0)}([function(e,t,o){"use strict";o.r(t);o(1),o(2),o(3),o(4),o(5);let n=jQuery;document.body.addEventListener("touchstart",()=>{document.querySelector("html").classList.add("touch-device")}),n("#edit-submitted-customer-tel").mask("(999) 999 99 99");const r=document.querySelectorAll(".main-menu__link");for(const e of r)e.classList.contains("active")&&(delete e.href,e.parentElement.classList.add("active"));const i=document.querySelectorAll('.local-menu [href*="#"]');for(let e of i)e.addEventListener("click",(function(t){t.preventDefault();const o=e.getAttribute("href");document.querySelector(o).scrollIntoView({behavior:"smooth",block:"start"})}))},function(e,t){let o=!0,n="";try{n=localStorage.getItem("bp_notice_date")}catch(e){o=!1}const r=document.querySelector(".notice"),i=r.querySelector(".notice__section").dataset.date,l=e=>{e.hidden=!0,document.removeEventListener("keydown",s)},s=e=>{e.preventDefault(),"Escape"!==e.key&&"Enter"!==e.key||l(r)};o&&(n===i?l(r):(r.hidden=!1,document.addEventListener("keydown",s),localStorage.setItem("bp_notice_date",i))),r.addEventListener("click",e=>{e.preventDefault(),l(r)})},function(e,t){var o;(o=jQuery)("tbody td, thead th:not([colspan])").hover((function(){const e=o(this);if(e.closest("table").hasClass("table--poor"))return;const t=e.closest("table").children("tbody").children().first().children("th").size(),n=t=>{const n=e.closest("table").children(t).children(),r=new Array(n.size()).fill(0);return n.each((e,t)=>{o(t).children().each((t,n)=>{const i=+o(n).attr("rowspan"),l=+o(n).attr("colspan");for(let t=e+1;t<e+i;t++)r[t]++,l>1&&(r[t]+=l-1)})}),r},r=t=>{let o=e.index()-t;return e.closest("thead").size()>0?o+=i[e.parent().index()]:o+=l[e.parent().index()],o},i=n("thead"),l=n("tbody"),s=l.map(r),a=i.map(r);s.forEach((function(n,r){n>t-1-l[r]&&o(o(e.closest("table").children("tbody").children()[r]).children()[n]).toggleClass("highlighted")})),a.forEach((function(n,r){n>t-1-i[r]&&o(o(e.closest("table").children("thead").children()[r]).children("th:not([colspan])")[n]).toggleClass("highlighted")}))}))},function(e,t){let o=jQuery;const n=document.querySelector(".webform-client-form-74");let r={};function i(){document.querySelector("#edit-submitted-parameters-amount").innerHTML=function(e){let t='<optgroup label="Цифровая печать">',o=Object.entries(e[1].digital);for(let e of o)t+=`<option value="${e[0]}" data-metod="digital">${e[0]}</option>`;t+='<optgroup label="Офсетная печать">',o=Object.entries(e[1].offset);for(let e of o)t+=`<option value="${e[0]}" data-metod="offset">${e[0]}</option>`;return t}(r.vizPrices),document.querySelector("#edit-submitted-parameters-carton").innerHTML=function(e){let t="",o=1,n=Object.entries(e);for(let e of n.values())t+=`<option value="${o}" data-carton="${e[0]}">${e[1].name}</option>`,o++;return t}(r.cartonPrices)}function l(){let{designPrice:e,shippingPrice:t,vizPrices:n,cartonPrices:i}=r;const l=o("#edit-submitted-option :radio:checked").val(),s=o("#edit-submitted-parameters-amount option:selected").data("metod"),a=o("#edit-submitted-parameters-amount option:selected").text(),c=o("#edit-submitted-parameters-carton option:selected").data("carton"),d=o("#edit-submitted-parameters-carton option:selected").text(),u=o("#edit-submitted-parameters-sides :radio:checked").val(),m=o("#edit-submitted-parameters-rounded :checkbox").prop("checked"),f=o("#edit-submitted-order-get-option :radio:checked").val(),p=o(".webform-component--parameters--amount .description");p.text("* офсетная печать одного макета"),o("#edit-submitted-parameters-amount .description").text();let h=n[u][s][a];if("digital"==s){const e=document.querySelector("#edit-submitted-parameters-carton");for(const t of e.querySelectorAll("option"))t.disabled=!1;h+=i[c][a]-i.cristalBoard[a],m&&(h+=+a),p.text("* цифровая печать"+(+a>100?" до "+Math.round(a/100)+" разных макетов":""))}else{const e=document.querySelector("#edit-submitted-parameters-carton");e.selectedIndex=0;for(const t of e.querySelectorAll("option"))t.value>1&&(t.disabled=!0)}"design"==l&&(h+=e),"shipping"==f&&(h+=t),o(".total__price").text(h),o("#edit-submitted-summa").val(h);let _="<ul>";_+=1==u?"<li>визитки односторонние</li>":"<li>визитки двусторонние</li>",_+="digital"==s?"<li>цифровая печать</li>":"<li>офсетная печать</li>",_+="<li>"+d.toLowerCase()+"</li>",_+=m?"<li>скругление</li>":"",_+="shipping"==f?"<li>доставка</li>":"<li>самовывоз</li>",_+=`</ul>Тираж ${a} шт.`,o(".total__summary").html(_)}const s=()=>{const e=document.querySelector(".webform .form-actions .form-submit"),t=document.querySelector('[name="submitted[design][src][file][fid]"]').value>0||document.querySelector("#edit-submitted-design-information-text").textLength>0||document.querySelector("#edit-submitted-design-src-link").value.length>0,o=document.querySelector("#edit-submitted-customer-mail").validity.valid,n=document.querySelector("#edit-submitted-customer-consent-1").validity.valid;e.disabled=!(t&&o&&n);let r=`<span class="total__warning--${t}">макет</span>`;r+=` <span class="total__warning--${o}">e-mail</span>`,r+=` <span class="total__warning--${n}">согласие</span>`;const i=document.querySelector(".total__warning")||document.createElement("p");i.className="total__warning",i.innerHTML=r;document.querySelector(".total__warning-wrap").prepend(i),e.disabled?document.querySelector(".total__warning").classList.add("total__warning--invalid"):document.querySelector(".total__warning").classList.remove("total__warning--invalid")},a=()=>{document.querySelector(".webform").classList.add("webform--active");const e=document.querySelectorAll(".webform fieldset");for(const t of e)t.classList.remove("disabled"),t.disabled=!1},c=()=>{s(),l()},d=e=>{s(),e.find(e=>"form-managed-file"==e.target.className)&&f()},u=e=>{let t=new MouseEvent("mousedown");e.target.closest(".form-managed-file").querySelector(".upload-button").dispatchEvent(t)},m=e=>{const t=e.querySelector(".upload-button");t&&(t.style.display="none"),e.addEventListener("change",u)},f=()=>{const e=document.querySelectorAll(".form-managed-file");for(const t of e)m(t)};if(n){fetch("sites/belka-print.ru/themes/bs4theme/src.php",{method:"POST",body:"viz"}).then(e=>e.json()).then(e=>{r=e,i(),l()});document.querySelector(".webform-component--option").addEventListener("click",a,{once:!0}),n.addEventListener("keyup",s),n.addEventListener("change",c);new MutationObserver(d).observe(n.querySelector(".webform-component--design--src"),{childList:!0,subtree:!0}),s(),f()}},function(e,t){const o=jQuery;document.querySelector(".main-menu").insertAdjacentHTML("beforeend",'<li class="folder folder--more main-menu__item">\n  <button class="main-menu__link folder__toggle folder__toggle" type="button">. . .</button>\n  <div class="folder__wrap">\n    <ul class="folder__menu">\n    </ul>\n  </div>\n</li>');const n=document.querySelector(".folder--more"),r=document.querySelectorAll(".main-menu > .main-menu__item:not(.folder--more)"),i=document.querySelectorAll(".main-menu__item");for(const e of i)e.addEventListener("click",t=>{if(e.classList.contains("folder"))return;t.stopPropagation();let o=new MouseEvent("click");e.querySelector(".main-menu__link").dispatchEvent(o)});const l=new IntersectionObserver((function(e){if(o(".main-nav__toggler").is(":visible"))return void(n.style.display="none");let t=e.length;for(let o=0;o<e.length;o++)if(!e[o].isIntersecting){t=o;break}for(let o=t;o<e.length;o++)n.querySelector(".folder__menu").prepend(e[o].target);for(const e of n.querySelectorAll(".folder"))o(e).off("click mouseenter focus mouseleave"),o(e).children(".folder__wrap").removeAttr("style"),o(e).children("button").attr("disabled","true"),o(e).addClass("main-menu__item--hover");n.style.display=n.querySelector(".main-menu__item")?"":"none"}),{root:document.querySelector(".main-nav__navbar"),threshold:1,rootMargin:"0px -38px 0px 0px"});for(const e of r)l.observe(e);function s(e,t){e.classList.contains("folder")&&(o(e).on("click mouseenter focus",a),o(e).on("mouseleave",c),o(e).children("button").removeAttr("disabled"),o(e).removeClass("main-menu__item--hover")),t.before(e)}function a(e){var t;!function(e){const t=e.children(".folder__wrap"),n=t.offset().top,r=t.offset().left,i=o(".main-nav__navbar").width()-r-t.width();r<0&&i>0&&t.offset({top:n,left:0});i<0&&r>0&&t.offset({top:top,left:o(".main-nav__navbar").width()-t.width()-0})}(o(this)),"mouseenter"==e.type&&o("html").hasClass("touch-device")||(o(this).hasClass("folder--opened")?((t=o(this)).children(".folder__wrap").removeClass("folder__wrap--show"),t.children(".folder__wrap").height(0),t.children(".folder__toggle").blur(),t.removeClass("folder--opened")):function(e){const t=e.children(".folder__wrap").children(".folder__menu").outerHeight(!0);e.children(".folder__wrap").addClass("folder__wrap--show"),e.children(".folder__wrap").height(t),e.addClass("folder--opened")}(o(this)))}function c(){o(".folder__wrap").each((function(e,t){o(t).parents(".folder__wrap").length>0||(o(t).css("left","unset").removeProp("style").height(0).removeClass("folder__wrap--show").parents(".folder").removeClass("folder--opened"),o(this).children(".folder__toggle").blur())}))}window.addEventListener("resize",()=>{if(o(".main-nav__toggler").is(":visible"))return void(()=>{let e=n.querySelector(".main-menu__item");for(;e;)s(e,n),e=n.querySelector(".main-menu__item")})();const e=n.querySelector(".main-menu__item");if(e){const t=n.previousElementSibling;n.offsetLeft-t.offsetLeft-t.offsetWidth>e.querySelector(".main-menu__link").offsetWidth&&s(e,n)}}),o(".folder").on("click mouseenter focus",a),o(".folder").on("mouseleave",c)},function(e,t){const o=document.querySelector(".banner--init"),n=document.querySelector(".banner__wrap"),r=document.querySelector(".banner__title"),i=document.querySelector(".banner__slogan"),l=e=>{e.offsetHeight,e.offsetTop,window.outerHeight;let t=getComputedStyle(r).fontSize.slice(0,-2),o=getComputedStyle(i).fontSize.slice(0,-2);for(;r.scrollWidth>r.clientWidth&&t>32;)t-=1,o-=1,r.style.fontSize=t+"px",i.style.fontSize=o+"px";n.style.transition="3s",n.style.opacity=1};l(o),window.addEventListener("scroll",()=>{document.querySelector(".banner").classList.remove("banner--init")}),window.addEventListener("resize",()=>l(o))}]);