!function(e){var t={};function o(n){if(t[n])return t[n].exports;var r=t[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,o),r.l=!0,r.exports}o.m=e,o.c=t,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)o.d(n,r,function(t){return e[t]}.bind(null,r));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o(o.s=0)}([function(e,t,o){"use strict";o.r(t);o(1),o(2),o(3),o(4),o(5);let n=jQuery;document.body.addEventListener("touchstart",()=>{document.querySelector("html").classList.add("touch-device")}),n("#edit-submitted-customer-tel").mask("(999) 999 99 99");const r=document.querySelectorAll(".main-menu__link");for(const e of r)e.classList.contains("active")&&(delete e.href,e.parentElement.classList.add("active"));const l=document.querySelectorAll('.local-menu [href*="#"]');for(let e of l)e.addEventListener("click",(function(t){t.preventDefault();const o=e.getAttribute("href");document.querySelector(o).scrollIntoView({behavior:"smooth",block:"start"})}))},function(e,t){let o=!0,n="";try{n=localStorage.getItem("bp_notice_date")}catch(e){o=!1}const r=document.querySelector(".notice"),l=r.querySelector(".notice__section").dataset.date,i=e=>{e.hidden=!0,document.removeEventListener("keydown",a)},a=e=>{e.preventDefault(),"Escape"!==e.key&&"Enter"!==e.key||i(r)};o&&(n===l?i(r):(r.hidden=!1,document.addEventListener("keydown",a),localStorage.setItem("bp_notice_date",l))),r.addEventListener("click",e=>{e.preventDefault(),i(r)})},function(e,t){var o;(o=jQuery)("tbody td, thead th:not([colspan])").hover((function(){const e=o(this);if(e.closest("table").hasClass("table--poor"))return;const t=e.closest("table").children("tbody").children().first().children("th").size(),n=t=>{const n=e.closest("table").children(t).children(),r=new Array(n.size()).fill(0);return n.each((e,t)=>{o(t).children().each((t,n)=>{const l=+o(n).attr("rowspan"),i=+o(n).attr("colspan");for(let t=e+1;t<e+l;t++)r[t]++,i>1&&(r[t]+=i-1)})}),r},r=t=>{let o=e.index()-t;return e.closest("thead").size()>0?o+=l[e.parent().index()]:o+=i[e.parent().index()],o},l=n("thead"),i=n("tbody"),a=i.map(r),s=l.map(r);a.forEach((function(n,r){n>t-1-i[r]&&o(o(e.closest("table").children("tbody").children()[r]).children()[n]).toggleClass("highlighted")})),s.forEach((function(n,r){n>t-1-l[r]&&o(o(e.closest("table").children("thead").children()[r]).children("th:not([colspan])")[n]).toggleClass("highlighted")}))}))},function(e,t){let o=jQuery;const n=document.querySelector(".webform-client-form-74");let r={};function l(){document.querySelector("#edit-submitted-parameters-amount").innerHTML=function(e){let t='<optgroup label="Цифровая печать">',o=Object.entries(e[1].digital);for(let e of o)t+=`<option value="${e[0]}" data-metod="digital">${e[0]}</option>`;t+='<optgroup label="Офсетная печать">',o=Object.entries(e[1].offset);for(let e of o)t+=`<option value="${e[0]}" data-metod="offset">${e[0]}</option>`;return t}(r.vizPrices),document.querySelector("#edit-submitted-parameters-carton").innerHTML=function(e){let t="",o=1,n=Object.entries(e);for(let e of n.values())t+=`<option value="${o}" data-carton="${e[0]}">${e[1].name}</option>`,o++;return t}(r.cartonPrices)}function i(){let{designPrice:e,shippingPrice:t,vizPrices:n,cartonPrices:l}=r;const i=o("#edit-submitted-option :radio:checked").val(),a=o("#edit-submitted-parameters-amount option:selected").data("metod"),s=o("#edit-submitted-parameters-amount option:selected").text(),c=o("#edit-submitted-parameters-carton option:selected").data("carton"),d=o("#edit-submitted-parameters-carton option:selected").text(),u=o("#edit-submitted-parameters-sides :radio:checked").val(),m=o("#edit-submitted-parameters-rounded :checkbox").prop("checked"),f=o("#edit-submitted-order-get-option :radio:checked").val(),p=o(".webform-component--parameters--amount .description");p.text("* офсетная печать одного макета"),o("#edit-submitted-parameters-amount .description").text();let h=n[u][a][s];if("digital"==a){const e=document.querySelector("#edit-submitted-parameters-carton");for(const t of e.querySelectorAll("option"))t.disabled=!1;h+=l[c][s]-l.cristalBoard[s],m&&(h+=+s),p.text("* цифровая печать"+(+s>100?" до "+Math.round(s/100)+" разных макетов":""))}else{const e=document.querySelector("#edit-submitted-parameters-carton");e.selectedIndex=0;for(const t of e.querySelectorAll("option"))t.value>1&&(t.disabled=!0)}"design"==i&&(h+=e),"shipping"==f&&(h+=t),o(".total__price").text(h),o("#edit-submitted-summa").val(h);let _="<ul>";_+=1==u?"<li>визитки односторонние</li>":"<li>визитки двусторонние</li>",_+="digital"==a?"<li>цифровая печать</li>":"<li>офсетная печать</li>",_+="<li>"+d.toLowerCase()+"</li>",_+=m?"<li>скругление</li>":"",_+="shipping"==f?"<li>доставка</li>":"<li>самовывоз</li>",_+=`</ul>Тираж ${s} шт.`,o(".total__summary").html(_)}const a=()=>{const e=document.querySelector(".webform .form-actions .form-submit"),t=document.querySelector('[name="submitted[design][src][file][fid]"]').value>0||document.querySelector("#edit-submitted-design-information-text").textLength>0||document.querySelector("#edit-submitted-design-src-link").value.length>0,o=document.querySelector("#edit-submitted-customer-mail").validity.valid,n=document.querySelector("#edit-submitted-customer-consent-1").validity.valid;e.disabled=!(t&&o&&n);let r=`<span class="total__warning--${t}">макет</span>`;r+=` <span class="total__warning--${o}">e-mail</span>`,r+=` <span class="total__warning--${n}">согласие</span>`;const l=document.querySelector(".total__warning")||document.createElement("p");l.className="total__warning",l.innerHTML=r;document.querySelector(".total__warning-wrap").prepend(l),e.disabled?document.querySelector(".total__warning").classList.add("total__warning--invalid"):document.querySelector(".total__warning").classList.remove("total__warning--invalid")},s=()=>{document.querySelector(".webform").classList.add("webform--active");const e=document.querySelectorAll(".webform fieldset");for(const t of e)t.classList.remove("disabled"),t.disabled=!1},c=()=>{a(),i()},d=e=>{a(),e.find(e=>"form-managed-file"==e.target.className)&&f()},u=e=>{let t=new MouseEvent("mousedown");e.target.closest(".form-managed-file").querySelector(".upload-button").dispatchEvent(t)},m=e=>{const t=e.querySelector(".upload-button");t&&(t.style.display="none"),e.addEventListener("change",u)},f=()=>{const e=document.querySelectorAll(".form-managed-file");for(const t of e)m(t)};if(n){fetch("sites/belka-print.ru/themes/bs4theme/src.php",{method:"POST",body:"viz"}).then(e=>e.json()).then(e=>{r=e,l(),i()});document.querySelector(".webform-component--option").addEventListener("click",s,{once:!0}),n.addEventListener("keyup",a),n.addEventListener("change",c);new MutationObserver(d).observe(n.querySelector(".webform-component--design--src"),{childList:!0,subtree:!0}),a(),f()}},function(e,t){const o=jQuery,n=document.querySelector(".main-nav__navbar");document.querySelector(".main-menu").insertAdjacentHTML("beforeend",'<li class="folder folder--more main-menu__item">\n  <button class="main-menu__link folder__toggle folder__toggle" type="button">. . .</button>\n  <div class="folder__wrap">\n    <ul class="folder__menu">\n    </ul>\n  </div>\n</li>');const r=document.querySelector(".folder--more"),l=document.querySelectorAll(".main-menu > .main-menu__item:not(.folder--more)"),i=document.querySelectorAll(".main-menu__item"),a=(e,t)=>{const o=e.type;e.stopPropagation();let n=new MouseEvent(o);t.dispatchEvent(n)},s=()=>{if((()=>{let e=r.querySelector(".main-menu__item");for(;e;)c(e,r),e=r.querySelector(".main-menu__item");r.style.display="none"})(),o(".main-nav__toggler").is(":visible"))return;let e=l.length-1;for(;n.scrollWidth>n.clientWidth;){if(e<2)return;r.querySelector(".folder__menu").prepend(l[e]),e--}(e=>{for(const t of e)o(t).off("click mouseenter focus mouseleave"),o(t).children(".folder__wrap").removeAttr("style"),o(t).children("button").attr("disabled","true"),o(t).addClass("main-menu__item--hover")})(r.querySelectorAll(".folder")),r.style.display=r.querySelector(".main-menu__item")?"":"none"};function c(e,t){e.classList.contains("folder")&&(o(e).on("click mouseenter focus",d),o(e).on("mouseleave",u),o(e).children("button").removeAttr("disabled"),o(e).removeClass("main-menu__item--hover")),t.before(e)}function d(e){var t;!function(e){const t=e.children(".folder__wrap"),n=t.offset().top,r=t.offset().left,l=o(".main-nav__navbar").width()-r-t.width();r<0&&l>0&&t.offset({top:n,left:0});l<0&&r>0&&t.offset({top:top,left:o(".main-nav__navbar").width()-t.width()-0})}(o(this)),"mouseenter"==e.type&&o("html").hasClass("touch-device")||(o(this).hasClass("folder--opened")?((t=o(this)).children(".folder__wrap").removeClass("folder__wrap--show"),t.children(".folder__wrap").height(0),t.children(".folder__toggle").blur(),t.removeClass("folder--opened")):function(e){const t=e.children(".folder__wrap").children(".folder__menu").outerHeight(!0);e.children(".folder__wrap").addClass("folder__wrap--show"),e.children(".folder__wrap").height(t),e.addClass("folder--opened")}(o(this)))}function u(){o(".folder__wrap").each((function(e,t){o(t).parents(".folder__wrap").length>0||(o(t).css("left","unset").removeProp("style").height(0).removeClass("folder__wrap--show").parents(".folder").removeClass("folder--opened"),o(this).children(".folder__toggle").blur())}))}for(const e of i)e.addEventListener("click",t=>{e.classList.contains("folder")||a(t,e.querySelector(".main-menu__link"))});window.addEventListener("resize",s),o(".folder").on("click mouseenter focus",d),o(".folder").on("mouseleave",u),s()},function(e,t){const o=()=>{document.querySelector(".banner").classList.remove("banner--init")},n=document.querySelector(".banner--init"),r=document.querySelector(".banner__wrap"),l=document.querySelector(".banner__title"),i=document.querySelector(".banner__slogan"),a=e=>{let t=getComputedStyle(l).fontSize.slice(0,-2),o=getComputedStyle(i).fontSize.slice(0,-2);for(;(l.scrollWidth>l.clientWidth||i.scrollWidth>i.clientWidth)&&!(t<32);)t-=1,o-=1,l.style.fontSize=t+"px",i.style.fontSize=o+"px";r.style.transition="all 0.5s, opacity 3s",r.style.opacity=1};n&&(a(),window.addEventListener("scroll",o),window.addEventListener("resize",()=>a()))}]);