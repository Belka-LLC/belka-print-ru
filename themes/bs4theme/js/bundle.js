!function(e){var t={};function n(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(o,r,function(t){return e[t]}.bind(null,r));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";n.r(t);n(1),n(2),n(3),n(4),n(5),n(6);let o=jQuery;document.body.addEventListener("touchstart",()=>{document.querySelector("html").classList.add("touch-device")}),o("#edit-submitted-customer-tel").mask("(999) 999 99 99");const r=document.querySelectorAll(".main-menu__link");for(const e of r)e.classList.contains("active")&&(delete e.href,e.parentElement.classList.add("active"));const i=document.querySelectorAll('.local-menu [href*="#"]');for(let e of i)e.addEventListener("click",(function(t){t.preventDefault();const n=e.getAttribute("href");document.querySelector(n).scrollIntoView({behavior:"smooth",block:"start"})}))},function(e,t){let n=!0,o="";try{o=localStorage.getItem("bp_notice_date")}catch(e){n=!1}const r=document.querySelector(".notice"),i=r.querySelector(".notice__section").dataset.date,l=e=>{e.hidden=!0,document.removeEventListener("keydown",a)},a=e=>{e.preventDefault(),"Escape"!==e.key&&"Enter"!==e.key||l(r)};n&&(o===i?l(r):(r.hidden=!1,document.addEventListener("keydown",a),localStorage.setItem("bp_notice_date",i))),r.addEventListener("click",e=>{e.preventDefault(),l(r)})},function(e,t){var n;(n=jQuery)("tbody td, thead th:not([colspan])").hover((function(){const e=n(this);if(e.closest("table").hasClass("table--poor"))return;const t=e.closest("table").children("tbody").children().first().children("th").size(),o=t=>{const o=e.closest("table").children(t).children(),r=new Array(o.size()).fill(0);return o.each((e,t)=>{n(t).children().each((t,o)=>{const i=+n(o).attr("rowspan"),l=+n(o).attr("colspan");for(let t=e+1;t<e+i;t++)r[t]++,l>1&&(r[t]+=l-1)})}),r},r=t=>{let n=e.index()-t;return e.closest("thead").size()>0?n+=i[e.parent().index()]:n+=l[e.parent().index()],n},i=o("thead"),l=o("tbody"),a=l.map(r),c=i.map(r);a.forEach((function(o,r){o>t-1-l[r]&&n(n(e.closest("table").children("tbody").children()[r]).children()[o]).toggleClass("highlighted")})),c.forEach((function(o,r){o>t-1-i[r]&&n(n(e.closest("table").children("thead").children()[r]).children("th:not([colspan])")[o]).toggleClass("highlighted")}))}))},function(e,t){let n=jQuery;const o=document.querySelector(".webform-client-form-74");let r={};function i(){document.querySelector("#edit-submitted-parameters-amount").innerHTML=function(e){let t='<optgroup label="Цифровая печать">',n=Object.entries(e[1].digital);for(let e of n)t+=`<option value="${e[0]}" data-metod="digital">${e[0]}</option>`;t+='<optgroup label="Офсетная печать">',n=Object.entries(e[1].offset);for(let e of n)t+=`<option value="${e[0]}" data-metod="offset">${e[0]}</option>`;return t}(r.vizPrices),document.querySelector("#edit-submitted-parameters-carton").innerHTML=function(e){let t="",n=1,o=Object.entries(e);for(let e of o.values())t+=`<option value="${n}" data-carton="${e[0]}">${e[1].name}</option>`,n++;return t}(r.cartonPrices)}function l(){let{designPrice:e,shippingPrice:t,vizPrices:o,cartonPrices:i}=r;const l=n("#edit-submitted-option :radio:checked").val(),a=n("#edit-submitted-parameters-amount option:selected").data("metod"),c=n("#edit-submitted-parameters-amount option:selected").text(),s=n("#edit-submitted-parameters-carton option:selected").data("carton"),d=n("#edit-submitted-parameters-carton option:selected").text(),u=n("#edit-submitted-parameters-sides :radio:checked").val(),m=n("#edit-submitted-parameters-rounded :checkbox").prop("checked"),f=n("#edit-submitted-order-get-option :radio:checked").val(),p=n(".webform-component--parameters--amount .description");p.text("* офсетная печать одного макета"),n("#edit-submitted-parameters-amount .description").text();let h=o[u][a][c];if("digital"==a){const e=document.querySelector("#edit-submitted-parameters-carton");for(const t of e.querySelectorAll("option"))t.disabled=!1;h+=i[s][c]-i.cristalBoard[c],m&&(h+=+c),p.text("* цифровая печать"+(+c>100?" до "+Math.round(c/100)+" разных макетов":""))}else{const e=document.querySelector("#edit-submitted-parameters-carton");e.selectedIndex=0;for(const t of e.querySelectorAll("option"))t.value>1&&(t.disabled=!0)}"design"==l&&(h+=e),"shipping"==f&&(h+=t),n(".total__price").text(h),n("#edit-submitted-summa").val(h);let _="<ul>";_+=1==u?"<li>визитки односторонние</li>":"<li>визитки двусторонние</li>",_+="digital"==a?"<li>цифровая печать</li>":"<li>офсетная печать</li>",_+="<li>"+d.toLowerCase()+"</li>",_+=m?"<li>скругление</li>":"",_+="shipping"==f?"<li>доставка</li>":"<li>самовывоз</li>",_+=`</ul>Тираж ${c} шт.`,n(".total__summary").html(_)}const a=()=>{const e=document.querySelector(".webform .form-actions .form-submit"),t=document.querySelector('[name="submitted[design][src][file][fid]"]').value>0||document.querySelector("#edit-submitted-design-information-text").textLength>0||document.querySelector("#edit-submitted-design-src-link").value.length>0,n=document.querySelector("#edit-submitted-customer-mail").validity.valid,o=document.querySelector("#edit-submitted-customer-consent-1").validity.valid;e.disabled=!(t&&n&&o);let r=`<span class="total__warning--${t}">макет</span>`;r+=` <span class="total__warning--${n}">e-mail</span>`,r+=` <span class="total__warning--${o}">согласие</span>`;const i=document.querySelector(".total__warning")||document.createElement("p");i.className="total__warning",i.innerHTML=r;document.querySelector(".total__warning-wrap").prepend(i),e.disabled?document.querySelector(".total__warning").classList.add("total__warning--invalid"):document.querySelector(".total__warning").classList.remove("total__warning--invalid")},c=()=>{document.querySelector(".webform").classList.add("webform--active");const e=document.querySelectorAll(".webform fieldset");for(const t of e)t.classList.remove("disabled"),t.disabled=!1},s=()=>{a(),l()},d=e=>{a(),e.find(e=>"form-managed-file"==e.target.className)&&f()},u=e=>{let t=new MouseEvent("mousedown");e.target.closest(".form-managed-file").querySelector(".upload-button").dispatchEvent(t)},m=e=>{const t=e.querySelector(".upload-button");t&&(t.style.display="none"),e.addEventListener("change",u)},f=()=>{const e=document.querySelectorAll(".form-managed-file");for(const t of e)m(t)};if(o){fetch("sites/belka-print.ru/themes/bs4theme/src.php",{method:"POST",body:"viz"}).then(e=>e.json()).then(e=>{r=e,i(),l()});document.querySelector(".webform-component--option").addEventListener("click",c,{once:!0}),o.addEventListener("keyup",a),o.addEventListener("change",s);new MutationObserver(d).observe(o.querySelector(".webform-component--design--src"),{childList:!0,subtree:!0}),a(),f()}},function(e,t){const n=jQuery,o=document.querySelector(".main-nav__navbar");document.querySelector(".main-menu").insertAdjacentHTML("beforeend",'<li class="folder folder--more main-menu__item">\n  <button class="main-menu__link folder__toggle folder__toggle" type="button">. . .</button>\n  <div class="folder__wrap">\n    <ul class="folder__menu">\n    </ul>\n  </div>\n</li>');const r=document.querySelector(".folder--more"),i=document.querySelectorAll(".main-menu > .main-menu__item:not(.folder--more)"),l=document.querySelectorAll(".main-menu__item"),a=(e,t)=>{const n=e.type;e.stopPropagation();let o=new MouseEvent(n);t.dispatchEvent(o)},c=()=>{if((()=>{let e=r.querySelector(".main-menu__item");for(;e;)s(e,r),e=r.querySelector(".main-menu__item");r.style.display="none"})(),n(".main-nav__toggler").is(":visible"))return;let e=i.length-1;for(;o.scrollWidth>o.clientWidth;){if(e<2)return;r.querySelector(".folder__menu").prepend(i[e]),e--}(e=>{for(const t of e)n(t).off("click mouseenter focus mouseleave"),n(t).children(".folder__wrap").removeAttr("style"),n(t).children("button").attr("disabled","true"),n(t).addClass("main-menu__item--hover")})(r.querySelectorAll(".folder")),r.style.display=r.querySelector(".main-menu__item")?"":"none"};function s(e,t){e.classList.contains("folder")&&(n(e).on("click mouseenter focus",d),n(e).on("mouseleave",u),n(e).children("button").removeAttr("disabled"),n(e).removeClass("main-menu__item--hover")),t.before(e)}function d(e){var t;!function(e){const t=e.children(".folder__wrap"),o=t.offset().top,r=t.offset().left,i=n(".main-nav__navbar").width()-r-t.width();r<0&&i>0&&t.offset({top:o,left:0});i<0&&r>0&&t.offset({top:top,left:n(".main-nav__navbar").width()-t.width()-0})}(n(this)),"mouseenter"==e.type&&n("html").hasClass("touch-device")||(n(this).hasClass("folder--opened")?((t=n(this)).children(".folder__wrap").removeClass("folder__wrap--show"),t.children(".folder__wrap").height(0),t.children(".folder__toggle").blur(),t.removeClass("folder--opened")):function(e){const t=e.children(".folder__wrap").children(".folder__menu").outerHeight(!0);e.children(".folder__wrap").addClass("folder__wrap--show"),e.children(".folder__wrap").height(t),e.addClass("folder--opened")}(n(this)))}function u(){n(".folder__wrap").each((function(e,t){n(t).parents(".folder__wrap").length>0||(n(t).css("left","unset").removeProp("style").height(0).removeClass("folder__wrap--show").parents(".folder").removeClass("folder--opened"),n(this).children(".folder__toggle").blur())}))}for(const e of l)e.addEventListener("click",t=>{e.classList.contains("folder")||a(t,e.querySelector(".main-menu__link"))});window.addEventListener("resize",c),n(".folder").on("click mouseenter focus",d),n(".folder").on("mouseleave",u),c()},function(e,t){const n=()=>{document.querySelector(".banner").classList.remove("banner--init")},o=document.querySelector(".banner--init"),r=document.querySelector(".banner__wrap"),i=document.querySelector(".banner__title"),l=document.querySelector(".banner__slogan"),a=e=>{let t=getComputedStyle(i).fontSize.slice(0,-2),n=getComputedStyle(l).fontSize.slice(0,-2);for(;(i.scrollWidth>i.clientWidth||l.scrollWidth>l.clientWidth)&&!(t<32);)t-=2,n-=2,i.style.fontSize=t+"px",l.style.fontSize=n+"px";r.style.transition="all 0.5s, opacity 1s",r.style.opacity=1};o&&(a(),window.addEventListener("scroll",n),window.addEventListener("resize",()=>a()))},function(e,t){var n,o,r,i,l;n=window,o=document,r="script",n.ym=n.ym||function(){(n.ym.a=n.ym.a||[]).push(arguments)},n.ym.l=1*new Date,i=o.createElement(r),l=o.getElementsByTagName(r)[0],i.async=1,i.src="https://mc.yandex.ru/metrika/tag.js",l.parentNode.insertBefore(i,l),ym(46638852,"init",{clickmap:!0,trackLinks:!0,accurateTrackBounce:!0});const a=document.createElement("noscript");a.innerHTML='<div><img src="https://mc.yandex.ru/watch/46638852" style="position:absolute; left:-9999px;" alt="" /></div>',document.body.append(a)}]);